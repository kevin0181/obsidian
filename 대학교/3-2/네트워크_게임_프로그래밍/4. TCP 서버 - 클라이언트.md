
### 01 TCP 서버-클라이언트 구조

서버를 증설한다는게 -> 메모리를 추가?



### 02 TCP 서버-클라이언트 분석
ntoh() 
hton() 
or
hibyte() - 실제로 메모리에 있는 값을 건들지 않음
lobyte() - 실제로 메모리에 있는 값을 건들지 않음

위 두개는 완전 다름.

주소 정보 같은 경우에 hton으로 변경해서 가져와야함.
메모리값을 가져오는거임


> [!PDF|red] [[ch03_소켓 주소 구조체 다루기.pdf#page=17&selection=34,0,35,2&color=red|ch03_소켓 주소 구조체 다루기, p.17]]
> > sockaddr_in
> 
> 여기서 sin_family와 sin_zero같은 경우에 cpu 레지스터로 처리가 가능하지만 sin_port와 sin_addr같은 경우에 메모리에서 가져와서 처리해야하는거임.
> 

> [!PDF|yellow] [[ch04_TCP 서버-클라이언트.pdf#page=20&selection=20,8,20,9&color=yellow|ch04_TCP 서버-클라이언트, p.20]]
> > socket()
> 
> 서버의 소켓은 대기 소켓임 클라이언트가 접속할 수 있도록 대기하는 소켓 말하는듯?

bind() - 대기 소켓이 포트 정보 등을 알 수 있도록 로컬 주소 정보를 결합하는 역할을 함. 

> [!PDF|red] [[ch04_TCP 서버-클라이언트.pdf#page=20&selection=56,0,56,6&color=red|ch04_TCP 서버-클라이언트, p.20]]
> > listen
> 
> 클라이언트 연결 요청을 듣는거임. listen()을 해줘야지 이때 대기 상태가 되고 클라이언트의 연결 요청을 받아들일 수 있음.

accept() - connect() 함수 요청이 들어오면 accept()가 실행되는거임. 연결을 받아들이면 accept()하는거임. -> 성공적으로 되면 소켓이 하나 만들어지는거임. 이때 소켓은 클라이언트와 통신하라고 만들어지는 전용 소켓임. 클라이언트의 주소 정보를 넘겨 받게된다.

데이터를 주고받을때 recv(), send() 사용함

이때 accept()에서 만든 소켓을 closesocket()을 사용해서 소켓을 종료함 (다썻다면.)

---

> [!PDF|red] [[ch04_TCP 서버-클라이언트.pdf#page=20&selection=54,0,54,7&color=red|ch04_TCP 서버-클라이언트, p.20]]
> > connect
> 
> 클라이언트에서는 connet()함수가 bind()의 역할도 같이함.


> [!PDF|red] [[ch04_TCP 서버-클라이언트.pdf#page=25&selection=14,0,14,7&color=red|ch04_TCP 서버-클라이언트, p.25]]
> > connect
> 
> 클라이언트에서 connet()는 내부에 SOCKET sock가 가지고 있는 정보를 사용하여 bind()를 함. 이건 운영체제가 해줌.




 





